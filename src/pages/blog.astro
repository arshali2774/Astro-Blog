---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import Showcase from '../components/Showcase.astro';
// const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5')
// const posts = await response.json()
const posts = await Astro.glob('../posts/*.md')
---

<Layout title="Astro Blog">
    <Showcase heading="Astro Blog" text="Simple blog build with Astro."/>
    <section class="page-content">
        <div class="container">

            <!-- using markdown file -->
            {posts.map(post => (
                <Card>
                    <h3>{post.frontmatter.title}</h3>   
                    <div>
                    Written by <strong>{post.frontmatter.author}</strong> on {new Date(post.frontmatter.date).toLocaleDateString()}
                </div>
                    <p>{post.frontmatter.excerpt}</p>
                    <a class="btn" href={`/${post.frontmatter.slug}`}>Read More</a>
                </Card>
            ))}
        
        <!-- for headless cms or fetch data from apis -->
        <!-- {posts.map(post => (
            <Card>
                <h3>{post.title}</h3>
                <p>{post.body}</p>
                </Card>
        ))} -->

        <!-- hardcoding the data -->
          <!-- <div class="card">
            <h2>Astro 1.0</h2>
            <p>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam
              voluptate, quae, quod, voluptates quibusdam voluptatibus quidem
              voluptatum quos quia quas nesciunt. Quisquam, quae. Quisquam, quae.
              Quisquam, quae. Quisquam, quae.
            </p>
            <a href="post.html" class="btn">Read More</a>
          </div>
          <div class="card">
            <h2>Astro 1.0 Release Update</h2>
            <p>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam
              voluptate, quae, quod, voluptates quibusdam voluptatibus quidem
              voluptatum quos quia quas nesciunt. Quisquam, quae. Quisquam, quae.
              Quisquam, quae. Quisquam, quae.
            </p>
            <a href="post.html" class="btn">Read More</a>
          </div>
          <div class="card">
            <h2>Astro on Netlify Edge Functions</h2>
            <p>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam
              voluptate, quae, quod, voluptates quibusdam voluptatibus quidem
              voluptatum quos quia quas nesciunt. Quisquam, quae. Quisquam, quae.
              Quisquam, quae. Quisquam, quae.
            </p>
            <a href="post.html" class="btn">Read More</a>
          </div> -->
        </div>
      </section>
</Layout>